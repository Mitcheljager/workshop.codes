<% return unless @post.persisted? %>

<h2 class="mt-1/1">Update log</h2>

<div data-reveal-by-checkbox>
  <div class="checkbox">
    <%= form.check_box :revision, data: { action: "reveal-by-checkbox" }, aria: { describedby: "revision-hint", controls: "revision" } %>
    <%= form.label :revision, "This is a revision" %>
  </div>

  <span class="form-hint" id="revision-hint">
    Checking this tells our system you've updated your Workshop code. This will allow you to write a summary of what has changed. This should only be used if you've made changes to your gamemode, not if you've only made changes to your post on this website.<br>
    If your share code has changed the URL to your old code will continue to function, even if you do not check this box.
  </span>

  <div class="form-group mt-1/2" data-role="hidden-by-checkbox" style="<%= "display: none" %>" id="revision">
    <div class="form-group form-group-max-width mb-1/2">
      <%= form.label :version, "Version", class: "form-label", for: "revision-version" %>

      <div class="form-hint" id="version-hint">
        Update the version number if you are creating a revision. If you already changed it in the Settings tab you don't need to do it here again.
      </div>

      <%= form.text_field :version,
        class: "form-input",
        placeholder: "E.g. 1.0.5",
        id: "revision-version",
        data: { role: "linked-input", key: "version" },
        aria: { describedby: "version-hint" } %>
    </div>

    <div class="form-group mt-0">
      <%= form.label :revision_description, "Update Notes", class: "form-label" %>

      <div class="form-hint" id="revision-description-hint">
        Write a short summary of what has changed in this version in relation to the previous. <strong>This description is full Markdown enabled.</strong>
      </div>

      <%= form.text_area :revision_description,
        class: "form-input form-textarea",
        data: { role: "simple-mde", max_length: REVISION_DESCRIPTION_LIMIT },
        aria: { describedby: "revision-description-hint" } %>
    </div>
  </div>
</div>
