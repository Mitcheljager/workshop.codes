<div class="form-group-max-width">
  <%= form_for @user, url: url do |f| %>
    <% if user.errors.any? %>
      <div class="error-block">
        <h2 class="error-block__title"><strong><%= pluralize(user.errors.count, "error") %></strong> prohibited this user from being saved:</h2>

        <ul>
          <% user.errors.full_messages.each do |message| %>
            <li><small><%= message %></small></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-field">
      <%= f.label :username, "Username", class: "form-label" %>
      <%= f.text_field :username, placeholder: "Username", class: "form-input" %>
    </div>

    <hr class="small">

    <div class="form-field">
      <%= f.label :password, "Password", class: "form-label" %>
      <%= f.password_field :password, placeholder: "Password", class: "form-input", aria: { describedby: "password-hint" } %>

      <p class="form-hint mt-1/8" id="password-hint">
        Please use a unique password that is different from the one you use for Overwatch. Passwords are encrypted and securely stored.
      </p>
    </div>

    <div class="form-field">
      <%= f.label :password_confirmation, "Password confirmation", class: "form-label" %>
      <%= f.password_field :password_confirmation, placeholder: "Password confirmation", class: "form-input" %>
    </div>

    <hr class="small">

    <div class="form-field">
      <%= f.label :email, "Email address (Optional)", class: "form-label" %>
      <%= f.email_field :email, placeholder: "Email address", class: "form-input", aria: { describedby: "email-hint" } %>

      <p class="form-hint mt-1/8" id="email-hint">
        Your email address is used to recover your account when you forget your password. <strong>This is completely optional.</strong> Your email address is encrypted and securely stored. It will not be used for anything unless explicitly allowed by you.
      </p>
    </div>

    <!-- This is used as a honeypot. This field should always be empty for regular users. -->
    <div class="visibility-hidden">
      <%= f.label :email_confirmation, "If you are human, ignore this field", class: "form-label" %>
      <%= f.text_field :email_confirmation, class: "form-input", tabindex: -1, autocomplete: "off" %>
    </div>

    <hr class="small">

    <div class="form-group checkbox">
      <%= check_box_tag :remember_me %>
      <%= label_tag :remember_me, "Remember me (uses cookies)" %>
    </div>

    <p class="form-hint">
      By creating an account, you are agreeing to the Workshop.codes <%= link_to "Terms of Service", tos_path, class: "text-lightest" %>.
    </p>

    <%= submit_tag "Submit", class: "button w-100" %>
  <% end %>
</div>
